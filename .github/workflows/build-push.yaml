name: protoc

on: [push]

env:
  GO111MODULE: "on"
  GOPROXY: "https://goproxy.cn"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-go@v2-beta
        with:
          go-version: "^1.14.0"
      - run: |
          sudo apt install protobuf-compiler
          go get -u github.com/golang/protobuf/protoc-gen-go
          go get -u github.com/micro/protoc-gen-micro/v2
          protoc
